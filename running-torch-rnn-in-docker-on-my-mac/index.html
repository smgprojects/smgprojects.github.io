<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>running torch-rnn in docker on my mac</title>
    <meta name="description" content="An open history notebook forked from Jason Heppler">
    <meta name="author" content="Shawn Graham"/>

    <!-- Get date last modified from git log. (Uses current time if file entry not found, e.g. projects/)  -->
    

    <!-- For posts, page.date is the date they are published under, which we use as their 'canonical' dc:date -->
    
      
      

    <!-- RDFa Metadata (in DublinCore) -->
    <meta property="dc:title" content="running torch-rnn in docker on my mac" />
    <meta property="dc:creator" content="Shawn Graham" />
    <meta property="dc:date" content="2017-06-23T11:35:00-04:00" />
    <meta property="dc:format" content="text/html" />
    <meta property="dc:language" content="en" />
    <meta property="dc:identifier" content="/running-torch-rnn-in-docker-on-my-mac/" />
    <meta property="dc:rights" content="CC BY-NC-SA 3.0" />
    <meta property="dc:source" content="Shawn Graham's Open Digital Humanities Notebook 2016-17" />
    <meta property="dc:subject" content="History" />
    <meta property="dc:type" content="website" />

    <!-- RDFa Metadata (in OpenGraph) -->
    <meta property="og:title" content="running torch-rnn in docker on my mac" />
    <meta property="og:author" content="/bio.html" />
    <meta property="og:site_name" content="Shawn Graham's Open Digital Humanities Notebook 2016-17" />
    <meta property="og:url" content="/running-torch-rnn-in-docker-on-my-mac/" />
    <meta property="og:type" content="website" />

    <!-- Google Scholar Metadata -->
    <meta name="citation_author" content="Shawn Graham"/>
    <meta name="citation_date" content="2017-06-23T11:35:00-04:00"/>
    <meta name="citation_title" content="running torch-rnn in docker on my mac"/>
    <meta name="citation_journal_title" content="Shawn Graham's Open Digital Humanities Notebook 2016-17"/>

    <!-- Twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="">
    <meta name="twitter:creator" content="">
    <meta name="twitter:url" content="">
    <meta name="twitter:title" content="Shawn Graham's Open Digital Humanities Notebook 2016-17">
    <meta name="twitter:description" content="An open history notebook forked from Jason Heppler">

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:100,400,400italic,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
    <script src="https://use.typekit.net/wak0qrc.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css">
    <script type="text/javascript" src="/components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/components/jquery/dist/jquery.min.js"></script>

    <!-- Custom Styling -->
    <!-- <link rel="stylesheet" href="/css/lmullen.css"> -->
    <link rel="stylesheet" href="/css/main.css"> 
    <!-- <link rel="stylesheet" href="/css/search.css"> -->
    <!-- <link rel="stylesheet" href="/css/custom.css"> -->
    <link rel="stylesheet" href="/css/bigfoot-default.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-3dkvEK0WLHRJ7/Csr0BZjAWxERc5WH7bdeUya2aXxdU= sha512-+L4yy6FRcDGbXJ9mPG8MT/3UCDzwR9gPeyFNMCtInsol++5m3bk2bXWKdZjvybmohrAsn3Ua5x8gfLnbE1YkOg==" crossorigin="anonymous">
    <link rel="canonical" href="http://smgprojects.github.io/running-torch-rnn-in-docker-on-my-mac/">

    <!-- Initialize Bigfoot.js -->
    <script type="text/javascript" src="/components/bigfoot/bigfoot.js"></script>
    <script type="text/javascript">
        $.bigfoot();
    </script>

    <!-- Todo lists (via Lincoln Mullen) -->
    <script type="text/javascript">
      /* <![CDATA[ */
      $(document).ready(function() {
        $("li:contains('[ ]')").html(function(_, html) {
          return html.replace('[ ]', '<span style="color:red;">☐</span>');
        });
        $("li:contains('[s]')").html(function(_, html) {
          return html.replace('[s]', '<span style="color:gold;">☐</span>');
        });
        $("li:contains('[x]')").html(function(_, html) {
          return html.replace('[x]', '<span style="color:green;">☑</span>');
        });
      });
      /* ]]> */
    </script>
    <script defer async src="//hypothes.is/embed.js"></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Shawn Graham's Open Digital Humanities Notebook 2016-17</a>

    <nav class="site-nav">
      <ul>
        <li><a href="/about/">About</a></li>
        <li><a href="/essays/">Essays</a></li>
        <li><a href="/feed.xml">RSS</a></li>
      </ul>
    </nav>

  </div>

</header>


    <div class="page-content">
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">

  <div class="well sidebar-nav">

<!--- <center><img src="/images/logo.png" class="img-responsive" alt="Shawn Graham's Notebook"/><br/>
  <a href="http://electricarchaeology.ca">Shawn Graham</a>
  </center>
--->
  <br/>

  <div id="search">
    <form action="http://duckduckgo.com/" method="get">
    <input type="hidden" name="sites" value="smgprojects.github.io" />
      <input type="text" id="search_input" name="q" placeholder="Search" autocomplete="off">
    </form>
  </div>

    <ul class="nav nav-list">
      <li class="nav-header">General</li>
      <li><a href="/tagged/">Notes by Tag</a></li>
      <li><a href="/archive/">All Notes by Date</a></li>
      <li><a href="/archive-alphabetical/">All Notes Alphabetically</a></li>
      <li><a href="/essays/">Essays and General Writing</a></li>
      <li><a href="/categories/">Categories</a></li>

      <li class="nav-header">Topics and Projects</li>
      <li><a href="/reading-notes/">Reading Notes</a></li>
      <li><a href="/archaeogaming/">Archaeogaming</a></li>
      <li><a href="/design-studio/">Design Studio in DH</a></li>
      <li><a href="/soundbashing-history/">Soundbashing History</a></li>
      <li class="nav-header">Meta</li>
      <li><a href="/project-news/">Notebook News</a></li>
      <li><a href="/about/">About Me</a></li>
      <li><a href="/notebook/">About This Notebook</a></li>
    </ul>
  </div>

</div> <!-- / span3 -->


        <div class="span9">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">running torch-rnn in docker on my mac</h1>
    <p class="post-meta">Jun 23, 2017</p>
  </header>

  <article class="post-content">
    <ul id="markdown-toc">
  <li><a href="#experimenting-with-a-recurrent-neural-network-package" id="markdown-toc-experimenting-with-a-recurrent-neural-network-package">experimenting with a recurrent neural network package</a>    <ul>
      <li><a href="#what-i-was-trying-to-do" id="markdown-toc-what-i-was-trying-to-do">what I was trying to do</a></li>
      <li><a href="#what-i-did" id="markdown-toc-what-i-did">what I did</a></li>
      <li><a href="#things-that-were-hard" id="markdown-toc-things-that-were-hard">things that were hard</a></li>
      <li><a href="#thoughts-on-where-to-go-next" id="markdown-toc-thoughts-on-where-to-go-next">thoughts on where to go next</a></li>
    </ul>
  </li>
</ul>

<h1 id="experimenting-with-a-recurrent-neural-network-package">experimenting with a recurrent neural network package</h1>

<h2 id="what-i-was-trying-to-do">what I was trying to do</h2>
<ul>
  <li>I was curious to figure out if I could train the computer to write an Indiana Jones script. To do this, you put together a file to show the computer what such a script looks like. This is the ‘training’ file, or the input.txt</li>
  <li>I googled until I found the scripts. I used Raiders, Temple of Doom, and Last Crusade</li>
  <li>reading the documentation for <a href="https://github.com/karpathy/char-rnn">char-rnn</a> I realized that was too small, so I added Goonies and the Brendan Frasier Mummy.</li>
</ul>

<h2 id="what-i-did">what I did</h2>
<ul>
  <li>I followed the instructions at https://github.com/karpathy/char-rnn to download and install the char-rnn package</li>
  <li>the last instruction, about sourcing, I had to re-run when I logged back into dhbox</li>
  <li>today’s history.txt file is <a href="june21-todays-history-file.txt">june21-todays-history-file.txt</a></li>
</ul>

<h2 id="things-that-were-hard">things that were hard</h2>
<ul>
  <li>getting the data. I went to gist.github.com and made a file, <a href="https://gist.github.com/shawngraham/af1edaa5b40be09d643a4700bb2150af">input.txt</a></li>
  <li>I used curl to download it to the data folder, but had to find the ‘raw’ version, otherwise i just got the html that wraps the gist page. Raw version is behind the raw button on the page, [here](https://gist.githubusercontent.com/shawngraham/af1edaa5b40be09d643a4700bb2150af/raw/14c6a48715f20725256b9b2ccd13eeb3a3372fcd/input.txt]</li>
  <li>trained the rnn with this command: <code>th train.lua -data_dir data/input.txt -rnn_size 512 -num_layers 2 -dropout 0.5</code></li>
  <li>came back the next day, when it finished running (which is today). Had to enter the source command again before dhbox remembered where torch was installed - i cd’d into the torch folder to do that</li>
  <li>‘sampled’ the model - this runs the generate-a-new-script thing <code>th sample.lua cv/some_checkpoint.t7 -gpuid -1</code></li>
  <li>had to ls the cv folder so I would know the file name for the last checkpoint.</li>
  <li>this printed the result to the screen; to do it to a file I added the &gt; filename thing: <code>th sample.lua cv/some_checkpoint.t7 -gpuid -1 &gt; script.txt</code></li>
</ul>

<h2 id="thoughts-on-where-to-go-next">thoughts on where to go next</h2>

<p>this ends the example. You could link to annotations you made, things you’ve seen, work that this entry is in dialog with, and so on.</p>

<p>Note what is in this repo: a description of what I was up to; the results of my <code>$ history &gt; todayshistory.txt</code> command, the output of what I was trying to do, links to other things I used/created in the course of the experiment. You can make one repo with many folders, or many repos of just one folder, but whatever you do, try to keep everything together in a logical manner.</p>

  </article>

  <p class="text-info">
    <table class="table table-condensed" id="post-info">
      <tr class="info">
        <td><small><i class="glyphicon glyphicon-calendar"></i>&nbsp;Created: 23 Jun 2017</small></td>
        <td><small><i class="glyphicon glyphicon-calendar"></i>&nbsp;Modified: 23 Jun 2017</small></td>
        <td><small><i class="fa fa-github-square"></i>&nbsp;<a
              href="https://github.com/smgprojects/notebook/commits/master/source/_posts/2017-06-23-running-torch-rnn-in-docker-on-my-mac.md">History</a></small></td>
        <td><small><a href="javascript:window.print()"><i class="glyphicon glyphicon-print"></i>&nbsp;Print</a></small></td>
        <td><small><a href="/running-torch-rnn-in-docker-on-my-mac/"><i class="glyphicon glyphicon-link"></i>Permalink</a></small></td>
      </tr>
    </table>
    </p>

<div class="tag-area alert-primary">
  <ul id="post-categories">
    <li><i class="glyphicon glyphicon-tags"></i>&nbsp;Tags: </li>
  
    <li class="categorylist"><a href='/tagged/#experiment'>experiment</a></li>
  
    <li class="categorylist"><a href='/tagged/#rnn'>rnn</a></li>
  
  </ul>
</div>

</div>

        </div>
      </div>
    </div>
    </div>

    <footer class="site-footer">

  <div class="footer-wrapper">

    <h2 class="footer-heading">Shawn Graham's Open Digital Humanities Notebook 2016-17</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <figure class="image-left">
            <img class="avatar" src="/images/minionme.jpeg" height="120" width="120"/>
          </figure>
          <p class="text">I'm at Carleton University in Ottawa Canada.</p>

          <form method="get" action="http://duckduckgo.com/">
            <input type="search" name="q" maxlength="255" placeholder="Search">
            <input type="hidden" names="sites" value="smgprojects.github.io">
            <input type="hidden" name="k7" value="#faf8f8">
            <input type="hidden" name="kj" value="#b33">
            <input type="hidden" name="ky" value="#fafafa">
            <input type="hidden" name="kx" value="b">
            <input type="hidden" name="ko" value="-1">
            <input type="hidden" name="k1" value="-1">
            <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
          </form>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          <li>
            <i class="fa fa-globe"></i> <a href="http://electricarchaeology.ca">electricarchaeology.ca</a>
          </li>
          
          <li>
              <i class="fa fa-github-square"></i> <a href="https://github.com/shawngraham"><span class="username">shawngraham</span>
            </a>
          </li>
          

          
          <li>
              <i class="fa fa-twitter-square"></i> <a href="https://twitter.com/electricarchaeo"><span class="username">electricarchaeo</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        Shawn Graham<br/>
        <ul class="social-media-list">
          <li><i class="fa fa-university"></i> Department of History, 406 Paterson Hall, Carleton University, Ottawa Canada</li>
          <li><i class="fa fa-envelope"></i> <a href="mailto:shawn.graham@carleton.ca">shawn.graham@carleton.ca</a></li>
        </ul>
      </div>
    </div>

  </div>

</footer>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75211414-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
